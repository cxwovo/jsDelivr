import{j as e,N as t,C as s,o,c as a,f as i,a as n,s as r,u as l,h as c,t as m,z as p,m as d,D as u,l as h,F as y,r as b,g,x as v}from"./index-95cbf248.js";import{L as f}from"./LazyImgJs-a4c13394.js";import{e as w,r as C,g as k,a as j,b as S,c as I}from"./Common-e7c789d0.js";import{m as V}from"./common-bd5d0c2e.js";import{_ as L}from"./_plugin-vue_export-helper-1b428a4d.js";function x(e){if(!e)return;let t={Chrome:/Chrome/,IE:/MSIE/,Firefox:/Firefox/,Opera:/Presto/,Safari:/Version\/([\d.]+).*Safari/,360:/360SE/,QQBrowswe:/QQ/,Edge:/Edg/},s={iPhone:/iPhone/,iPad:/iPad/,Android:/Android/,Windows:/Windows/,Mac:/Macintosh/},o=e;const a={browserName:"",browserVersion:"",osName:"",osVersion:"",deviceName:""};for(let i in t)t[i].test(o)&&(a.browserName=i,"Chrome"===i?a.browserVersion=o.split("Chrome/")[1].split(" ")[0]:"IE"===i?a.browserVersion=o.split("MSIE ")[1].split(" ")[1]:"Firefox"===i?a.browserVersion=o.split("Firefox/")[1]:"Opera"===i?a.browserVersion=o.split("Version/")[1]:"Safari"===i?a.browserVersion=o.split("Version/")[1].split(" ")[0]:"360"===i?a.browserVersion="":"QQBrowswe"===i?a.browserVersion=o.split("Version/")[1].split(" ")[0]:"Edge"===i&&(a.browserVersion=o.split("Edg/")[1].split(" ")[0]));for(let i in s)s[i].test(o)&&(a.osName=i,"Windows"===i?a.osVersion=parseInt(o.split("Windows NT ")[1].split(";")[0]):"Mac"===i?a.osVersion=o.split("Mac OS X ")[1].split(")")[0].replaceAll("_","."):"iPhone"===i?a.osVersion=o.split("iPhone OS ")[1].split(" ")[0].replaceAll("_","."):"iPad"===i?a.osVersion=o.split("iPad; CPU OS ")[1].split(" ")[0].replaceAll("_","."):"Android"===i&&(a.osVersion=o.split("Android ")[1].split(";")[0],a.deviceName=o.split("(Linux; Android ")[1].split("; ")[1].split(" Build")[0]));return a}function N(e){return`/source/lib/comment/ua/${e.browserName.toLowerCase()}.svg`}function A(e){if("Windows"===e.osName){return`/source/lib/comment/ua/windows_win${parseInt(e.osVersion)}.svg`}return"Mac"===e.osName||"iOS"===e.osName||"iPhone"===e.osName||"iPad"===e.osName?"/source/lib/comment/ua/ios.svg":`/source/lib/comment/ua/${e.osName.toLowerCase()}.svg`}const E=["id"],P={class:"author"},O={key:0,class:"cxw-comment"},_={class:"meta"},M={class:"author-comment-time"},T={key:0,class:"belong-place"},q={key:1,class:"useragent-info"},Q={class:"belong-place"},F=["src"],U={class:"belong-place"},W=["src"],$={class:"reply-button"},B=["onClick"],H={class:"reply-meta"},R={key:0},z=["innerHTML"],D={key:1},J=["onClick","href"],X=["innerHTML"],G={name:"CommentItem"},K=L(Object.assign(G,{props:{replyList:{type:Array,default:()=>[]},layers:{type:Number,default:2},parentName:{type:String,default:""}},emits:["showCancelReply"],setup(b,{emit:g}){const v=b,k=g,j=()=>{k("showCancelReply")},S=()=>{if(v.layers>0&&v.replyList&&v.replyList.length>0)for(let e=0;e<v.replyList.length;e++)document.querySelector("#comment-"+v.replyList[e].id).style.marginLeft="40px"};return e((()=>{S()})),t((()=>{S()})),(e,t)=>{const g=s("Item",!0);return o(!0),a(y,null,i(b.replyList,(e=>(o(),a("div",{key:e.id,id:"comment-"+e.id,class:"reply-contain"},[n("div",P,[n("div",null,[(o(),r(f,{key:e.avatar,style:{"margin-right":"10px"},"touch-width":"40px","touch-height":"40px","data-src":e.avatar,type:"avatar","has-suffix":!1,"error-imgs":l(w)},null,8,["data-src","error-imgs"])),e.admin?(o(),a("span",O," 博主 ")):c("",!0),n("span",null,m(e.author),1)]),n("div",_,[n("div",M,[p(m(l(V)(e.createTime))+" ",1),l(d).themeConfig.enableCommentUa&&e.belongPlace?(o(),a("span",T,m(e.belongPlace),1)):c("",!0),l(d).themeConfig.enableCommentUa&&e.userAgent?(o(),a("span",q,[n("span",Q,[n("img",{src:l(N)(l(x)(e.userAgent)),onerror:"this.src=getUnknownImg()",alt:"ua-browser"},null,8,F),p(" "+m(l(x)(e.userAgent).browserName)+" "+m(l(x)(e.userAgent).browserVersion),1)]),n("span",U,[n("img",{src:l(A)(l(x)(e.userAgent)),onerror:"this.src=getUnknownImg()",alt:"ua-os"},null,8,W),p(" "+m(l(x)(e.userAgent).osName)+" "+m(l(x)(e.userAgent).osVersion),1)])])):c("",!0)]),n("div",$,[n("a",{href:"javascript:;",onClick:u((t=>{return s=e.id,o=v.layers,localStorage.setItem("replyId",s),localStorage.setItem("layers",o),localStorage.getItem("layers"),k("showCancelReply"),void document.querySelector("#comment-"+s).appendChild(document.querySelector(".comment-editor"));var s,o}),["stop"])},"回复",8,B)])]),n("div",H,[""===v.parentName?(o(),a("p",R,[n("div",{innerHTML:l(C)(e.content,"comment")},null,8,z)])):(o(),a("p",D,[n("a",{onClick:t=>((e,t,s)=>{e.preventDefault();const o=document.querySelector(t).querySelector(".author .reply-meta"),a=document.querySelector(s).querySelector(".author .reply-meta .replay-parent");o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),a.style.pointerEvents="none",o.classList.add("content-flicker"),setTimeout((()=>{o.classList.remove("content-flicker"),a.style.pointerEvents="auto"}),2e3)})(t,"#comment-"+e.parentId,"#comment-"+e.id),class:"replay-parent",href:"#comment-"+e.parentId},m("@"+v.parentName),9,J),n("span",{innerHTML:l(C)(e.content,"comment")},null,8,X)]))])]),h(g,{onShowCancelReply:j,"reply-list":e.children,"parent-name":e.author,layers:v.layers-1},null,8,["reply-list","parent-name","layers"])],8,E)))),128)}}}),[["__scopeId","data-v-e0d0c190"]]),Y={class:"emotion-box"},Z={class:"motion-switcher-table"},ee={class:"comment-emoji"},te={key:0,id:"container-emoji",class:"motion-container haha-container"},se=["onClick","title"],oe=["src","alt"],ae={key:1,id:"container-emoji",class:"motion-container bilibili-container"},ie=["onClick","title"],ne={key:2,id:"container-emoji",class:"motion-container menhera-container"},re=["onClick","title"],le=L({__name:"CommentEmoji",props:{content:{type:String,default:""}},emits:["update:content"],setup(e,{emit:t}){let s=b("戳我试试 OωO");const r=e,p=t;function d(){let e=document.querySelector(".emotion-box");"戳我试试 OωO"===s.value?(s.value="嘿嘿嘿 ヾ(≧∇≦*)ゝ",e.classList.remove("emoji-fade-leave-active"),e.style.display="block",e.classList.add("emoji-fade-enter-active"),setTimeout((()=>{e.classList.remove("emoji-fade-enter-active")}),800)):(s.value="戳我试试 OωO",e.classList.add("emoji-fade-leave-active"),setTimeout((()=>{e.style.display="none"}),800))}let h=b("haha");function f(e){h.value=e}function w(e,t){"haha"===t?e=" :"+e+": ":"bilibili"===t?e="bemoji("+e+")":"menhera"===t&&(e=" "+e+" "),p("update:content",r.content+e)}return(e,t)=>(o(),a(y,null,[n("p",{id:"emotion-toggle",class:"no-select",onClick:d},[n("span",null,m(l(s)),1)]),n("div",Y,[n("table",Z,[n("tbody",null,[n("tr",null,[n("th",{class:g([["haha"===l(h)?"active on-hover":""],"category haha-box"]),onClick:t[0]||(t[0]=u((e=>f("haha")),["stop"]))}," 泡泡 ",2),n("th",{class:g([["bilibili"===l(h)?"active on-hover":""],"category bilibili-box"]),onClick:t[1]||(t[1]=u((e=>f("bilibili")),["stop"]))}," B站 ",2),n("th",{class:g([["menhera"===l(h)?"active on-hover":""],"category menhera-box"]),onClick:t[2]||(t[2]=u((e=>f("menhera")),["stop"]))}," 颜文字 ",2)])])]),n("div",ee,["haha"===l(h)?(o(),a("div",te,[(o(!0),a(y,null,i(l(j).hahaEmoji,((e,t)=>(o(),a("span",{onClick:u((t=>w(e.name,"haha")),["stop"]),title:e.description,class:"emoji-item"},[n("img",{src:l(k)(e.name),alt:e.name},null,8,oe)],8,se)))),256))])):c("",!0),"bilibili"===l(h)?(o(),a("div",ae,[(o(!0),a(y,null,i(l(j).bilibiliEmoji,((e,t)=>(o(),a("span",{onClick:u((t=>w(e.name,"bilibili")),["stop"]),title:e.description,style:v({backgroundImage:`url(${l(S)(e.name)})`}),class:"emotion-secter emoji-item emotion-select-parent"},[n("div",{class:"img emotion-select-child",style:v([e.style,{backgroundImage:`url(${l(I)(e.name)})`}])},null,4)],12,ie)))),256))])):c("",!0),"menhera"===l(h)?(o(),a("div",ne,[(o(!0),a(y,null,i(l(j).menheraEmoji,((e,t)=>(o(),a("span",{onClick:u((t=>w(e.name,"menhera")),["stop"]),title:e.name,class:"emoji-item text"},m(e.name),9,re)))),256))])):c("",!0)])])],64))}},[["__scopeId","data-v-f37a2e74"]]);export{le as C,K as I,x as a,A as b,N as g};
